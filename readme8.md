Olá. Este é o meu resumo do dia 8 da primeira Sprint da minha trilha de aprendizado sobre QA com AWS enquanto estou estagiando pela Compass.uol



# AWS CLOUD PRACTITIONER ESSENTIALS 

A AWS oferece uma grande variedade de serviços para todos os negócios, começando com elementos básicos, como computação, armazenamento e ferramentas de segurança de rede. Por meio de soluções complexas, como blockchain, machine learning ou inteligência artificial, e plataformas de desenvolvimento de robôs. Todo o caminho até conjuntos de ferramentas muito especializadas como sistemas de gerenciamento de produção de vídeo e satélites orbitais que você pode alugar por minuto. Realmente, são muitas possibilidades. Mas, para simplificar, **iremos abordar aqui os fundamentos da Nuvem AWS**.

## O QUE É UM MODELO CLIENTE-SERVIDOR?

Na computação, um cliente pode ser um navegador da web ou um aplicativo de desktop com o qual uma pessoa interage para fazer solicitações a servidores de computador. Um servidor pode ser serviços como o Amazon Elastic Cloud Compute (Amazon EC2), um tipo de servidor virtual.

Por exemplo, suponha que um cliente faça uma solicitação de um artigo de notícias, a pontuação em um jogo on-line oum um vídeo engraçado. O servidor avalia os detalhes dessa solicitação e atende retornando as informações ao cliente.

## O QUE É COMPUTAÇÃO EM NUVEM?

Computação em nuvem é a entrega de **recursos de TI** **sob demanda** pela internet com uma definição de **preço de pagamento pelo que usa.**

**entrega sob demanda** significa que a AWS(fornecedora de nuvem) tem os recusos que você precisa quando precisa deles, sem que você precise informar com antecedencia quando precisa deles.

A ideia dos **recursos de TI** é, na verdade, uma grande parte da filosofia da AWS. Muitas vezes, nos perguntam por quê a AWS tem tantos serviços. E a resposta é realmente simples: porque os negócios precisam. Se existem elementos de TI que são comuns entre diferentes tipos de negócios, então, não há um diferencial.

Nenhum contrato adicional ou ligação por time de vendas é necessário Com o modelo de **pagamento conforme o uso**, nós reforçamos o que a gente já havia falado aqui na cafeteria. Você não tem uma loja com funcionários 24 horas por dia, da mesma forma que você faz durante as horas de pico. Na verdade, em alguns momentos, você pode nem mesmo ter funcionários. Então, por quê pagar por ambientes de desenvolvimento, por exemplo, nos finais de semana, se os seus desenvolvedores nem estão trabalhando nesses dias?

## MODELOS DE IMPLANTAÇÃO DA COMPUTAÇÃO EM NUVEM

Ao selecionar uma estratégia de nuvem, a empresa deve considerar fatores como componentes de aplicativos de nuvem necessários, ferramentas de gerenciamento de recursos preferenciais e requisitos de infraestrutura de TI legada.

Os três modelos de implantação de computação em nuvem são computação baseada na **nuvem, local e híbrida**.

### Implantação baseada na nuvem:

Em um modelo de implantação baseada na nuvem, você pode migrar aplicativos existentes para a nuvem ou projetar e criar novos aplicativos na nuvem. Você pode criar esses aplicativos em uma infraestrutura de baixo nível que precise do gerenciamento de sua equipe de TI. Como alternativa, você pode criá-los usando serviços de nível superior que reduzem os requisitos de gerenciamento, arquitetura e scaling da infraestrutura principal.

Por exemplo, uma empresa poderia criar um aplicativo que consiste em servidores virtuais, bancos de dados e componentes de redes totalmente baseados na nuvem.

### Implantação no local:

A implantação local também é conhecida como uma implantação de nuvem privada. Nesse modelo, os recursos são implantados no local usando ferramentas de virtualização e gerenciamento de recursos.

Por exemplo, você poderia ter aplicativos executados em tecnologia totalmente mantida em seu data center local. Embora esse modelo seja muito parecido com a infraestrutura de TI legada, sua incorporação de tecnologias de virtualização e gerenciamento de aplicativos ajuda a aumentar a utilização de recursos.

### Implantação Híbrida:

Em uma implantação híbrida, os recursos baseados na nuvem ficam conectados à infraestrutura local. Você pode adotar essa abordagem em várias situações. Por exemplo, você tem aplicativos legados que são melhor mantidos no local ou as regulamentações governamentais exigem que sua empresa mantenha determinados registros no local.

Suponha que uma empresa queira usar serviços de nuvem que podem automatizar o processamento e a análise de dados em lote. No entanto, a empresa tem vários aplicativos legados que são mais adequados no local e que não serão migrados para a nuvem. Com uma implantação híbrida, a empresa conseguiria manter os aplicativos legados no local enquanto se beneficiaria dos serviços de dados e análises executados na nuvem.



## BENEFÍCIOS DA COMPUTAÇÃO EM NUVEM

Considere por que uma empresa escolhe adotar uma abordagem específica de computação em nuvem para atender às necessidades de negócios. Os seus benefícios seriam:

### Troque despesas iniciais por despesas variáveis:

Despesas iniciais se referem a data centers, servidores físicos e outros recursos nos quais você precisaria investir antes de usá-los. Despesas variáveis significam que você paga apenas pelos recursos de computação que consumir em vez de investir muito em data centers e servidores antes de saber como usá-los.

### Pare de gastar dinheiro para executar e manter data centers:

A computação em data centers costuma exigir que você gaste mais dinheiro e tempo gerenciando a infraestrutura e os servidores.

Um benefício da computação em nuvem é poder se concentrar menos nessas tarefas e mais em seus aplicativos e clientes.

### Pare de adivinhar a capacidade: 

Com a computação em nuvem, você não precisa prever a capacidade de infraestrutura necessária antes de implantar um aplicativo.

Por exemplo, você pode executar instâncias do Amazon EC2 quando necessário e pagar apenas pelo tempo de computação que usar. Em vez de pagar por recursos não usados ou ter que lidar com capacidade limitada, você pode acessar apenas a capacidade necessária. Você também pode aumentar ou reduzir a capacidade em resposta à demanda.

### Beneficie-se de enormes economias de escala:

O uso da computação em nuvem permite obter um custo variável inferior ao que você consegue por conta própria.

Como o uso de centenas de milhares de clientes pode ser agregado na nuvem, provedores como a AWS podem alcançar enormes economias de escala. A economia de escala se transforma em pagamento conforme o uso com preços mais baixos.

### Aumente a velocidade e a agilidade:

O uso da computação em nuvem permite obter um custo variável inferior ao que você consegue por conta própria.

Como o uso de centenas de milhares de clientes pode ser agregado na nuvem, provedores como a AWS podem alcançar enormes economias de escala. A economia de escala se transforma em pagamento conforme o uso com preços mais baixos.

### Terr alcance global em minutos:

A presença global da nuvem AWS permite que você implante aplicativos para clientes em todo o mundo rapidamente, ao mesmo tempo que oferece baixa latência. Isso significa que, mesmo se você estiver em uma parte do mundo diferente de seus clientes, eles poderão acessar os seus aplicativos com atrasos mínimos.



## AMAZON ELASTIC COMPUTE CLOUD (AMAZON EC2)

O Amazon Elastic Compute Cloud, ou Amazon EC2, fornece capacidade computational segura e redimensionável na nuvem como instâncias do Amazon EC2. As instâncias de EC2 fornecem poder computacional altamente flexível, econômico e rápido, principalmente quando você compara com a execução dos seus próprios servidores on-premises no seu datacenter.

As instâncias EC2 são executadas em hosts físicos, gerenciados pela AWS, usando tecnologia de virtualização. Quando você lança uma instância EC2, não está necessariamente tomando o host inteiro para si. Em vez disso, você está compartilhando o host com várias outras instâncias, também conhecidos como máquinas virtuais. E o Hypervisor que está em execução na máquina host é responsável por compartilhar os recursos físicos subjacentes entre as máquinas virtuais. **Essa ideia de compartilhar hardware subjacente é chamada de Alocação Múltipla**. O Hypervisor coordena essa alocação e é gerenciado pela AWS. O Hypervisor é responsável por isolar as máquinas virtuais umas das outras. Mesmo compartilhando recursos, uma instância EC2 não está ciente de outras instâncias que também estão naquele host. Elas estão seguras e isoladas umas das outras. E, felizmente, isso não é algo que você mesmo precisa configurar. Mas é importante conhecer a ideia de alocação múltipla e ter um nível de compreensão sobre como isso funciona. As instâncias EC2 oferecem flexibilidade e controle, portanto, além de poder ativar novos servidores, ou deixá los off line quando precisar, você precisa controlar a configuração dessas instâncias de forma flexível.

Então, você pode criar instâncias maiores ou menores sempre que precisar. Você também controla a configuração de rede da EC2. Portanto, quais tipos de solicitação chegam ao seu servidor e se elas possuirão acesso público ou privado, isso é algo que você decide.

Imagine que você é responsável pela arquitetura dos recursos de sua empresa e precisa ser compatível com novos sites. Com recursos locais tradicionais, você precisa fazer o seguinte: 

- Gastar dinheiro adiantadamente para comprar hardware.
- Aguardar até que os servidores sejam entregues. 
- Instalar os servidores em seu data center físico.
- Fazer todas as configurações necessárias.

Em comparação, com uma instância do Amazon EC2, você pode usar um servidor virutal para executar aplicativos na nuvem AWS. 

- Você pode provisionar e executar uma instância do Amazon EC2 em minutos.
- Você pode parar de usar a instância quando terminar de executar uma carga de trabalho.
- Você paga apenas pelo tempo de computação em que uma instância estiver em execução, não quando ela é interrompida ou encerrada.
- Você pode economizar custos pagando apenas pela capacidade do servidor necessária ou desejada.



### Como o Amazon EC2 funciona:

**Execução:** Primeiro, você executa uma instância. Comece selecionando um modelo com configurações básicas para a sua instância. Essas configurações incluem o sistema operacional, o servidor de aplicativos ou os aplicativos. Você também precisa selecionar o tipo de instância, que é a configuração de hardware específica da sua instância.

À medida que se prepara para iniciar uma instância, você deve especificar as configurações de segurança para controlar o tráfego de rede que pode fluir para dentro e para fora da instância. Mais adiante neste curso, exploraremos os recursos de segurança do Amazon EC2 com mais detalhes.

**Conexão:** Em seguida, conecte-se à instância. Voc~e pode se conectar à instância de várias maneiras. Seus programas e aplicativos têm vários métodos diferentes para se conectar diretamente à instância e trocar dados. Os usuários também podem se conectar à instância iniciando a sessão e acessando a área de trabalho do computador.

**Uso:** Depois de se conectar à instância, você pode começar a usá-la. Você pode executar comandos para instalar software, adicionar armazenamento, copiar e organizar arquivos e muito mais.



### Os tipos de instâncias do Amazon EC2:

Agora que aprendemos sobre instâncias EC2 é o papel crucial que desempenham na AWS, Vamos falar sobre os diferentes tipos de instâncias que estão disponíveis.

Cada tipo de instância é agrupada em uma família e são otimizadas para determinados tipos de tarefas. Os tipos de instâncias oferecem combinações variadas de CPU, memória, armazenamento, capacidade de rede e oferecem a você a flexibilidade de escolher a mistura adequada de recursos para suas aplicações. As diferentes famílias de instância EC2 são: de uso geral, otimizada para computação, otimizada para memória, computação acelerada e otimizada para armazenamento.

**Instâncias de uso geral:** Instâncias de uso geral equilibram os recursos de computação, memória e rede. Você pode usá-las para diversas cargas de trabalho, como:

- Servidores de aplicativos.
- Servidores de jogos.
- Servidores de back-end para aplicativos empresariais.
- Bancos de dados pequenos e médios.

Suponha que você tenha um aplicativo no qual as necessidades de recursos para computação, memória e rede sejam praticamente equivalentes. Você pode executar esse aplicativo em uma instância de uso geral porque ele não precisa de otimização em nenhuma área de recurso único.

**Instâncias otimizadas para computação:** Instâncias otimizadas para computação são ideais para aplicativos vinculados à computação que se beneficiam de processadores de alto desempenho. Assim como instâncias de uso geral, você pode usar instâncias otimizadas para computação para cargas de trabalho, como servidores web, de aplicativos e de jogos.

No entanto, a diferença é que aplicativos otimizados para computação são ideais para servidores web de alto desempenho, servidores de aplicativos de computação intensiva e servidores de jogos dedicados. Você também pode usar instâncias otimizadas para computação para cargas de trabalho de processamento em lote, com o processamento de muitas transações em um único grupo.

**Instâncias otimizadas para memória:** São projetadas para fornecer desempenho rápido para cargas de trabalho que processam grandes conjuntos de dados na memória. Na computação, a memória é uma área de armazenamento temporário. Ela contém todos os dados e instruções de que uma unidade central de processamento (CPU) precisa para conseguir realizar ações. Antes que um programa de computador ou aplicativo possa ser executado, ele é carregado do armazenamento para a memória. Esse processo de pré-carregamento dá à CPU acesso direto ao programa de computador.

Suponha que você tenha uma carga de trabalho que precise que grandes quantidades de dados sejam pré-carregados antes de executar um aplicativo. Esse cenário pode ser de um banco de dados de alto desempenho ou uma carga de trabalho que envolva a execução de processamento em tempo real de uma grande quantidade de dados não estruturados. Nesses tipos de casos de uso, considere usar uma instância otimizada para memória. As instâncias otimizadas para memória permitem que você execute cargas de trabalho com altas necessidades de memória e tenha um ótimo desempenho.

**Instâncias de computação acelerada:** Usam aceleradores de hardware, ou coprocessadores, para executar algumas funções de forma mais eficiente do que é possível em um software executado em CPUs. Exemplos dessas funções são cálculos de números com vírgula flutuante, processamento de gráficos e correspondência de padrões de dados.

Na computação, um acelerador de hardware é um componente que pode agilizar o processamento de dados. As instâncias de computação acelerada são ideais para cargas de trabalho, como aplicativos gráficos e streaming de jogos e de aplicativos.

**Instâncias otimizadas para armazenamento:** As instâncias otimizadas para armazenamento são projetadas para cargas de trabalho que exigem alto acesso sequencial de leitura e gravação a grandes conjuntos de dados no armazenamento local. Exemplos de cargas de trabalho adequadas para instâncias otimizadas para armazenamento são sistemas de arquivos distribuídos, aplicativos de data warehouse e sistemas de processamento de transações on-line de alta frequência (OLTP).

Na computação, o termo operações de entrada/saída por segundo (IOPS) é uma métrica que mensura o desempenho de um dispositivo de armazenamento. Ela indica quantas operações diferentes de entrada ou saída um dispositivo pode executar em um segundo. As instâncias otimizadas para armazenamento foram projetadas para fornecer dezenas de milhares de IOPS aleatórias e de baixa latência para aplicativos.

Imagine as operações de entrada como dados colocados em um sistema, como registros inseridos em um banco de dados. Uma operação de saída são dados gerados por um servidor. Um exemplo de saída pode ser a análise realizada nos registros em um banco de dados. Se você tiver um aplicativo com alto requisito de IOPS, uma instância otimizada para armazenamento poderá fornecer melhor desempenho em relação a outros tipos de instâncias não otimizados para esse tipo de caso de uso.



### Definição de preço do Amazon EC2:

Com o Amazon EC2, você paga apenas pelo tempo de computação que usar. O Amazon EC2 oferece diversas opções de preço para diferentes casos de uso. Por exemplo, se o seu caso de uso tolerar interrupções, você poderá economizar com instâncias spot. Você também pode economizar assumindo um compromisso antecipadamente e bloqueando um nível mínimo de uso com instâncias reservadas.

Temos várias opções de faturamento disponíveis, são elas:

**Instâncias sob demanda:** Instâncias sob demanda são ideais para cargas de trabalho irregulares de curto prazo que não podem ser interrompidas. Custos antecipados ou contratos mínimos não se aplicam. As instâncias são executadas continuamente até que sejam interrompidas e você paga apenas pelo tempo de computação que usar.

Exemplos de casos de uso para instâncias sob demanda são desenvolvimento e teste de aplicativos e execução de aplicativos com padrões de uso imprevisíveis. As instâncias sob demanda não são recomendadas para cargas de trabalho que duram um ano ou mais, porque essas cargas de trabalho podem ser mais econômicas usando instâncias reservadas.

**Saving Plans do Amazon EC2:** A AWS oferece Savings Plans para vários serviços computacionais, incluindo o Amazon EC2. O Savings Plans do Amazon EC2 permite reduzir os custos de computação ao haver o compromisso com uma quantidade consistente de uso de computação por um período de um ou três anos. Esse compromisso resulta em economias de até 72% em relação aos custos de instâncias sob demanda.

Qualquer uso até o compromisso é cobrado de acordo com o preço de Savings Plan com desconto (por exemplo, USD 10 por hora). Qualquer uso além do compromisso é cobrado de acordo com os preços normais de instâncias sob demanda.

Mais adiante neste curso, você analisará o AWS Cost Explorer, uma ferramenta que permite visualizar, interpretar e gerenciar o uso e os custos da AWS ao longo do tempo. Se você estiver considerando o modelo Savings Plans, o AWS Cost Explorer poderá analisar seu uso do Amazon EC2 nos últimos 7, 30 ou 60 dias. O AWS Cost Explorer também dá recomendações personalizadas para Savings Plans. Essas recomendações calculam o quanto você pode economizar mensalmente com o Amazon EC2, com base no uso anterior do Amazon EC2 e no valor do compromisso por hora em um Savings Plan de um ou três anos.

**Instâncias reservadas:** Instâncias reservadas são um desconto de cobrança aplicado ao uso de instâncias sob demanda em sua conta. Você pode adquirir instâncias reservadas comuns e instâncias reservadas conversíveis por um período de um ou três anos, e instâncias reservadas agendadas por um período de um ano. Você tem mais economia com a opção de três anos.

Ao final do período da instância reservada, você pode continuar usando a instância do Amazon EC2 sem interrupção. No entanto, são cobrados os preços de instâncias sob demanda até que um dos procedimentos a seguir seja feito:

- Encerrar a Instância.
- Adquirir uma nova instância reservada que corresponda aos atributos da instância (tipo de instância, região, locação e plataforma).

**Instâncias spot:** As instâncias spot são ideais para cargas de trabalho com horários de início e término flexíveis ou que toleram interrupções. As instâncias spot usam a capacidade de computação não utilizada do Amazon EC2 e têm uma economia de até 90% de desconto em relação aos preços das instâncias sob demanda.

Diferentemente do Savings Plans do Amazon EC2, as instâncias spot não exigem contratos ou o compromisso com uma quantidade consistente de uso de computação.

Suponha que você tenha um trabalho de processamento em segundo plano que pode ser iniciado e interrompido conforme for necessário (como o trabalho de processamento de dados para uma pesquisa de cliente). Você deseja iniciar e interromper o trabalho de processamento sem afetar as operações gerais de seus negócios. Se você fizer uma solicitação spot e a capacidade do Amazon EC2 estiver disponível, a instância spot será iniciada. No entanto, se você fizer uma solicitação spot e a capacidade do Amazon EC2 estiver indisponível, a solicitação não terá sucesso até que a capacidade seja disponibilizada. A capacidade indisponível pode atrasar a execução do trabalho de processamento em segundo plano.

Depois de executar uma instância spot, se a capacidade não estiver mais disponível ou a demanda por instâncias spot aumentar, sua instância poderá ser interrompida. Isso pode não representar problemas para o trabalho de processamento em segundo plano. No entanto, no exemplo anterior de desenvolvimento e teste de aplicativos, é provável que você queira evitar interrupções inesperadas. Portanto, escolha um tipo de instância do EC2 diferente que seja ideal para essas tarefas.

**Hosts dedicados:** Hosts dedicados são servidores físicos com capacidade de instância do Amazon EC2 totalmente dedicada ao uso do cliente.

Você pode usar suas licenças de software por soquete, por núcleo ou por VM existentes para manter a conformidade da licença. Você pode adquirir hosts dedicados sob demanda e reservas de hosts dedicados. De todas as opções do Amazon EC2 que foram abordadas, os hosts dedicados são os mais caros.



### Escalabilidade do Amazon EC2:

A próxima coisa sobre a qual é importante falar é outro grande benefício da AWS: a escalabilidade e elasticidade. Ou como a capacidade pode crescer e diminuir com base na necessidade dos seus negócios.

Aqui está o dilema do data center on-premises: se o seu negócio é como 99% de todas as empresas do mundo, as suas aplicações cliente variam ao longo do tempo. Às vezes, no intervalo de 24 horas ou alguns períodos de alta demanda e depois ficam semanas sem nenhuma demanda. Se você estiver montando um data center, a questão é: qual a quantidade certa de hardware para comprar? Se você comprar levando em consideração o valor de utilização médio, não vai desperdiçar tanto dinheiro. Mas quando as demandas alcançarem o pico de utilização, você não vai ter hardware para atender os clientes, principalmente durante os momentos mais críticos, onde é esperado que você consiga atingir seus resultados.

Agora, se você comprar pensando na utilização máxima certamente você vai ter clientes felizes. Mas durante a maior parte do ano você vai ter recursos ociosos, o que significa que a sua utilização média é muito baixa. Eu já vi data centers com uma utilização média inferior a 10%, apenas por medo de perder a demanda, o pico máximo. Então, como você resolve o problema do data center on-premises? Pois é . A verdade é que você não pode. E é aqui onde a AWS muda completamente essa conversa.

Se você pudesse provisionar suas cargas de trabalho para atender à demanda exata, a cada hora, todos os dias Agora você tem clientes felizes porque eles vão sempre poder usar os serviços que precisam. E você tem um diretor financeiro feliz porque ele recebe o retorno sobre o investimento que a sua empresa precisa.

A escalabilidade envolve começar apenas com os recursos de que você precisa e projetar sua arquitetura para responder automaticamente às alterações de demanda, fazendo aumentos ou reduções. Como resultado, você paga apenas pelos recursos que usa. Você não precisa se preocupar com a falta de capacidade de computação para atender às necessidades de seus clientes.

Se você quisesse que o processo de scaling acontecesse automaticamente, qual serviço AWS você usaria? **O serviço AWS que fornece essa funcionalidade para instâncias do Amazon EC2 é o Amazon EC2 Auto Scaling.**



### Amazon EC2 Auto Scaling:

Se você já tentou acessar um site que não carregava e atingiu o tempo limite algumas vezes, ele pode ter recebido mais solicitações do que conseguia atender. Essa situação é semelhante a esperar em uma longa fila em uma cafeteria quando há apenas um barista disponível para registrar os pedidos dos clientes.

O Amazon EC2 Auto Scaling permite que você adicione ou remova automaticamente instâncias do Amazon EC2 em resposta à alteração da demanda do aplicativo. Ao fazer auto scaling de suas instâncias, aumentando ou reduzindo conforme a necessidade, você consegue manter uma sensação maior de disponibilidade de aplicativos.

No Amazon EC2 Auto Scaling, há duas abordagens disponíveis: scaling dinâmico e scaling preditivo.

**Scaling dinâmico:** Responde às alterações na demanda.

**Scaling preditivo:** Programa automaticamente o número correto de instância do Amazon EC2 com base na demanda prevista.

Para dimensionar mais rapidamente, você também pode combinar os scalings dinâmico e preditivo.

Amazon EC2 Auto Scaling: adicionar instâncias baseado na demanda e em seguida destivar as instâncias quando elas não forem mais necessárias. Isso significa que, a cada minuto do dia, você sempre tem a quantidade certa de instância. Clientes felizes, diretor financeiro feliz, arquitetura feliz.



### Amazon Auto Scaling em Exemplo:

Já que na nuvem a capacidade computacional é um recurso programático, você pode adotar uma abordagem mais flexível para o problema de scaling. Ao adicionar o Amazon EC2 Auto Scaling a um aplicativo, você pode adicionar novas instâncias ao aplicativo quando for necessário e encerrá-las quando não forem mais necessárias.

Suponha que você esteja se preparando para executar um aplicativo em instâncias do Amazon EC2. Ao configurar o tamanho do seu grupo do Auto Scaling, você pode definir o número mínimo de instâncias do Amazon EC2 como sendo um. Isso significa que, em qualquer momento, deve haver pelo menos uma instância do Amazon EC2 em execução.

**Primerio:** Ao criar um grupo do Auto Scaling, você pode definir o número mínimo de instâncias do Amazon EC2. A capacidade mínima é o número de instâncias do Amazon EC2 que são executadas imediatamente após a criação do grupo do Auto Scaling. Neste exemplo, o grupo do Auto Scaling tem uma capacidade mínima de uma instância do Amazon EC2.

**Segundo:** Em seguida, você pode definir a capacidade desejada como duas instâncias do Amazon EC2, mesmo que o aplicativo precise de um mínimo de uma única instância do Amazon EC2 para que seja executado.

Se você não especificar o número desejado de instâncias do Amazon EC2 em um grupo do Auto Scaling, a capacidade desejada se tornará a capacidade mínima regular.

**Terceiro:** A terceira configuração que você pode definir em um grupo do Auto Scaling é a capacidade máxima. Por exemplo, você pode configurar o grupo do Auto Scaling para aumentar em resposta à demanda elevada, mas apenas para um máximo de quatro instâncias do Amazon EC2.

Como o Amazon EC2 Auto Scaling usa instâncias do Amazon EC2, você paga apenas pelas instâncias que usar, e somente quando elas forem usadas. Você agora tem uma arquitetura econômica que fornece a melhor experiência do cliente e ao mesmo tempo reduz custos.



### Direcionamento de tráfego com o Elastic Load Balancing:

Nós resolvemos o desafio da escala com o Amazon EC2 Auto Scaling. Mas agora a gente tem um pequeno problema de tráfego e vamos dar uma olhada na situação.

Quando você tem várias instâncias EC2 executando a mesma aplicação para atender ao mesmo propósito, e chega uma nova solicitação, como é que essa solicitação sabe para qual instância ela vai ser direcionada e como você pode assegurar de que há uma distribuição uniforme da carga de trabalho entre as duas instâncias EC2?  Não queremos só uma instância trabalhando, enquanto as outras estão paradas, sem uso. Você precisa, de alguma forma, rotear essas solicitações para essas instâncias para conseguir processar as requisições. O que você precisa para resolver isso é chamado de Balanceamento de carga.

Um balanceador de carga é uma aplicação que recebe requisições e faz o encaminhamento para processamento nas respectivas instâncias. Nesse caso, será sua responsabilidade e da sua equipe de operações lidar com todas as tarefas de instalar, gerenciar, atualizar, dimensionar, configurar a resposta à falha e manter a disponibilidade. Dá para fazer. Provavelmente, o que você realmente precisa é só distribuir corretamente o tráfego para um sistema de alta performance econômico, altamente disponível e escalável automaticamente, onde você pode simplesmente configurar e não mexer mais.

É aqui que entra em cena o Elastic Load Balancing, ou ELB.

O Elastic Load Balancing é o serviço AWS que distribui automaticamente o tráfego de entrada de aplicativos entre vários recursos, como instâncias do Amazon EC2.

Um balanceador de carga atua como um ponto único de contato para todo o tráfego da web de entrada no seu grupo do Auto Scaling. Isso significa que, à medida que você adiciona ou remove instâncias do Amazon EC2 em resposta à quantidade de tráfego de entrada, essas solicitações são direcionadas para o balanceador de carga primeiro. Em seguida, as solicitações se espalham por vários recursos que lidarão com elas. Por exemplo, se você tiver várias instâncias do Amazon EC2, o Elastic Load Balancing distribuirá a carga de trabalho entre elas para que nenhuma instância tenha que carregar a maior parte.

Embora o Elastic Load Balancing e o Amazon EC2 Auto Scaling sejam serviços separados, eles trabalham juntos para que os aplicativos executados no Amazon EC2 possam fornecer alto desempenho e disponibilidade.



### Elastic Load Balancing em Exemplo:

**Período de baixa demanda:**

Aqui está um exemplo de como o Elastic Load Balancing funciona. Suponha que alguns clientes vieram à cafeteria e estão prontos para fazer seus pedidos.

Se apenas algumas caixas registradoras estiverem abertas, isso corresponde à demanda dos clientes que precisam do serviço. A cafeteria tem menos probabilidade de ter caixas registradoras abertas sem clientes. Nesse exemplo, você pode pensar nas caixas registradoras como instâncias do Amazon EC2.

**Período de alta demanda:**

Ao longo do dia, à medida que o número de clientes aumenta, a cafeteria abre mais caixas registradoras para acomodá-los.

Além disso, um funcionário da cafeteria direciona os clientes para a caixa registradora mais adequada para que o número de solicitações possa ser distribuído uniformemente entre as caixas abertas. Você pode pensar nesse funcionário da cafeteria como um balanceador de carga.



## Aplicativos Monolíticos e Microsserviços

Os aplicativos são formados por vários componentes. Os componentes se comunicam entre si para transmitir dados, atender solicitações e manter o aplicativo em execução.

Suponha que você tenha um aplicativo com componentes com acoplamento forte. Esses componentes podem ser bancos de dados, servidores, interface do usuário, lógica de negócios e assim por diante. Esse tipo de arquitetura pode ser considerado um **aplicativo monolítico.**

Nessa abordagem à arquitetura do aplicativo, se um único componente falhar, outros componentes falharão e possivelmente todo o aplicativo.

**Para ajudar a manter a disponibilidade do aplicativo quando um único componente falha, você pode projetar esse aplicativo por uma abordagem de microsserviços.**

Em uma abordagem de microsserviços, os componentes do aplicativo têm um acoplamento fraco. Neste caso, se um único componente falhar, os outros componentes continuarão funcionando porque estarão em comunicação uns com os outros. O acoplamento fraco evita a falha completa do aplicativo.

Ao projetar aplicativos na AWS, você pode adotar uma abordagem de microsserviços com serviços e componentes que cumprem funções diferentes. 

Dois serviços facilitam a integração de aplicativos: Amazon Simple Notification Service (Amazon SNS) e Amazon Simple Queue Service (Amazon SQS).



### Amazon Simple Notification Service (Amazon SNS):

O Amazon Simple Notification Service (Amazon SNS) é um serviço de publicação/assinatura. Usando tópicos do Amazon SNS, um editor publica mensagens para assinantes.

No Amazon SNS, os assinantes podem ser servidores web, endereços de e-mail, funções do AWS Lambda ou várias outras opções.

OSMS é usado para enviar mensagens aos serviços mas também pode enviar notificações aos usuários finais. Ele faz isso de uma maneira diferente chamada de Modelo de publicação e assinatura ou Pub/Sub. Isso significa que você pode criar algo chamado Tópico no SNS, que é apenas um canal para as mensagens serem entregues. Você então configura os assinantes desse tópico e, finalmente, publica mensagens para esses assinantes. Na prática, isso significa que você pode enviar uma mensagem para um tópico que, em seguida, se espalhará a todos os assinantes de uma só vez. Esses assinantes também podem ser end points como filas SQS, funções do AWS Lambda ou os web UX: HTTP, HTTPS.

Além disso, o SNS também pode ser usado para liberar notificações para os usuários finais usando push móvel, SMS ou e-mail. Levando isso para um exemplo de uma cafeteria, poderíamos enviar uma notificação quando o pedido de um cliente estivesse pronto. Pode ser um simples SMS para avisá-los que podem pegar o pedido ou até mesmo um push móvel.



### Amazon SNS em Exemplo:

**Publicação de atualizações de um único tópico:** Suponha que a cafeteria tenha uma única newsletter com atualizações de todas as áreas de seu negócio. Ela tem como tópicos cupons, curiosidades sobre café e novos produtos. Todos esses tópicos são agrupados por ser uma única newsletter. Todos os clientes inscritos na newsletter recebem atualizações sobre cupons, curiosidades sobre café e novos produtos.

Depois de algum tempo, alguns clientes informam que preferem receber newsletters separadas apenas para os tópicos específicos de interesse. Os proprietários da cafeteria decidem tentar essa abordagem.

**Publicação de atualizações de vários tópicos:** Agora, em vez de ter uma única newsletter para todos os tópicos, a cafeteria dividiu-a em três newsletters separadas. Cada newsletter é dedicada a um tópico específico: cupons, curiosidades sobre café e novos produtos.

Os assinantes receberão atualizações imediatamente apenas para os tópicos específicos aos quais se inscreveram.

É possível que os assinantes se inscrevam em um ou mais tópicos. Por exemplo, o primeiro cliente se inscreve apenas no tópico de cupons e o segundo assinante se inscreve apenas no tópico de curiosidades sobre café. O terceiro cliente se inscreve tanto em curiosidades sobre café quanto no tópico de novos produtos.

**Embora esse exemplo da cafeteria envolva assinantes que são pessoas, no Amazon SNS, os assinantes podem ser servidores web, endereços de e-mail, funções do AWS Lambda ou várias outras opções.**



### Amazon Simple Queue Service (Amazon SQS): 

O Amazon Simple Queue Service (Amazon SQS) é um serviço de enfileiramento de mensagens. 

Use o Amazon SQS para enviar, armazenar e receber mensagens entre componentes de software, sem perder mensagens ou precisar que outros serviços estejam disponíveis. No Amazon SQS, um aplicativo envia mensagens para uma fila. Um usuário ou serviço recupera uma mensagem da fila, processa-a e a exclui da fila.

O SQS permite que você envie, armazene e receba mensagens entre componentes de software em qualquer volume, isto é, sem perder mensagens ou exigindo a disponibilidade de outros serviços. 

As filas SQS são onde as mensagens são colocadas até que sejam processadas e a AWS gerencia a infraestrutura subjacente para que você possa hospedar essas filas. Essas filas são dimensionadas automaticamente, são confiáveis e são fáceis de configurar e usar.



### Amazon SQS em Exemplo: 

**Exemplo de atendimento de um pedido:** Suponha que uma cafeteria tenha um processo de pedido em que um funcionário na caixa registradora recebe os pedidos e um barista prepara as bebidas. Pense nesses dois funcionários como dois componentes separados de um aplicativo. 

Primeiro, o operador de caixa recebe o pedido e o anota em um pedaço de papel. Em seguida, ele entrega o papel ao barista. Por fim, o barista faz a bebida e a serve ao cliente.

Quando o próximo pedido chegar, o processo se repete. Esse processo funciona sem problemas, desde que o operador de caixa e o barista sejam coordenados.

O que poderia acontecer se o operador de caixa anotasse um pedido e o entregasse ao barista, mas esse último estivesse em uma pausa ou ocupado com outro pedido? O operador de caixa precisaria esperar até que o barista estivesse pronto para aceitar o pedido. Isso causaria atrasos no processo de pedido e faria com que os clientes tivessem que esperar mais para receber seus pedidos.

Como a cafeteria se tornou mais popular e a linha de pedidos está se movendo mais lentamente, os proprietários percebem que o processo atual é demorado e ineficiente. Eles decidem tentar uma abordagem diferente que usa uma fila.

**Exemplo de pedidos em uma fila:** Lembre-se que o operador de caixa e o barista são dois componentes separados de um aplicativo. Um serviço de enfileiramento de mensagens, como o Amazon SQS, permite a troca de mensagens entre complementos de aplicativos desacoplados.

Nesse exemplo, a primeira etapa do processo permanece a mesma que antes: um cliente faz um pedido para o operador de caixa. 

O operador de caixa deixa o pedido em uma fila. Você pode pensar nisso como um quadro de pedidos que serve como buffer entre o operador de caixa e o barista. Mesmo que o barista esteja em uma pausa ou ocupado com outro pedido, o outro funcionário pode continuar colocando novos pedidos na fila. 

Em seguida, o barista verifica a fila e seleciona o pedido.

O barista prepara a bebida e a serve ao cliente. 

O barista, em seguida, remove da fila o pedido concluído. 

Enquanto o barista está preparando a bebida, o operador de caixa consegue continuar recebendo novos pedidos e adicioná-los à fila.

**Para aplicativos e microsserviços desacoplados, o Amazon SQS permite enviar, armazenar e recuperar mensagens entre componentes.**

**Essa abordagem desacoplada permite que os componentes separados funcionem de forma mais eficiente e independente.**